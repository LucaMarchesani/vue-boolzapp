<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Boolzapp</title>
    <!-- BOOTSTRAP 5.0 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <!-- GOOGLE FONTS -->

    <!-- FONTAWESOME -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css"
        integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- CUSTOM STYLE CSS -->
    <link rel="stylesheet" href="./css/style.css">
</head>

<body>
    <div id="app">
        <main>
            <div class="container-fluid mt-3 col-10 d-flex">

                <!-- sezione superiore contatti -->
                <div class="contacts col-4 bg-light">
                    <div class="account col-12 bg-app d-flex justify-content-between">
                        <div class="col-8">
                            <img src="./img/avatar_io.jpg" class="user-pic img-fluid" alt="">
                            <span class="col-10">Sofia</span>
                        </div>
                        <div class="icons col-4 align-self-center text-end me-1">
                            <i class="fa-solid fa-circle-notch m-2"></i>
                            <i class="fa-solid fa-message m-2"></i>
                            <i class="fa-solid fa-ellipsis-vertical m-2 "></i>
                        </div>
                    </div>

                    <!-- sezione notifiche -->
                    <div class="notification p-2 col-12 d-flex">
                        <div class="col-1 align-self-center ms-1 me-3">
                            <i class="fa-solid fa-bell-slash bell text-light"></i>
                        </div>
                        <div class="col-11">
                            <p class="notification-text m-0">Ricevi notifiche di nuovi messaggi</p>
                            <p class="notification-text text-decoration-underline text-secondary m-0">Attiva notifiche
                                dekstop</p>
                        </div>
                    </div>

                    <!-- barra di ricerca contatti -->
                    <div class="d-flex justify-content-center bg-app">
                        <i class="fa-solid fa-magnifying-glass align-self-center mx-3"></i>
                        <input type="search" id="search-bar" placeholder="Cerca o inizia una nuova chat">
                    </div>

                    <!-- contatti -->
                    <div v-for="element, index in contacts" class="contact d-flex col-11"
                        @click="visibleChat(element)" :class="(index === aIndex) ? 'clicked' : ''">
                        <div class="col-2">
                            <img :src="`./img/avatar${element.avatar}.jpg`" class="user-pic img-fluid"
                                alt="contact-photo">
                        </div>
                        <div class="col-10 d-flex justify-content-between">
                            <div>
                                <p class="m-0"> {{element.name}} </p>
                                <p class="last-message m-0 text-secondary"> Ultimo messaggio inviato </p>
                            </div>
                            <p class="last-message align-self-start text-secondary me-2">
                                12:00
                            </p>
                        </div>
                    </div>
                </div>

                <!-- sezione superiore chat-->
                <div class="chat col-8">
                    <div class="user-chat col-12 bg-app">
                        <div class="account col-12 d-flex">
                            <div class="chat-header col-9">
                                <img :src="`./img/avatar${contacts[aIndex].avatar}.jpg`" class="user-pic img-fluid"
                                    alt="">
                                <span class="col-10">{{contacts[aIndex].name}}</span>
                            </div>
                            <div class="icons col-3 align-self-center text-end">
                                <i class="fa-solid fa-magnifying-glass m-2"></i>
                                <i class="fa-solid fa-paperclip m-2"></i>
                                <i class="fa-solid fa-ellipsis-vertical m-2"></i>
                            </div>
                        </div>

                        <!-- sezione principale chat -->
                        <div class="text-area col-12">
                            <div v-for="msg, index in contacts[aIndex].messages"
                                :class="(msg.status === 'received') ? 'white-text' : 'green-text'">
                                <div class="d-flex">
                                    <p>{{msg.message}}</p>
                                    <span class="date">{{msg.date.substring(11, 16)}}</span>
                                </div>
                            </div>
                        </div>


                        <!-- sezione input messaggi -->
                        <div class="my-text col-12 d-flex justify-content-between mt-2">
                            <i class="fa-regular fa-face-smile col-1 text-center align-self-center"></i>
                            <input v-model="newMessage" @keyup.enter="addMessage(newMessage)" type="text"
                                class="message col-10" placeholder="Scrivi un messaggio">
                            <i class="fa-solid fa-microphone col-1 text-center align-self-center"></i>
                        </div>
                    </div>
                </div>
        </main>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/luxon@3.1.1/build/global/luxon.min.js"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="./main/script.js"></script>
</body>

</html>